<html lang="en-Us">
<head>

	<meta charset="utf-8">
    
	<title>Login with Facebook or Twitter</title>

	<link rel="stylesheet" href="css/style.css">
    <link rel='stylesheet' href='https://fonts.googleapis.com/css?family=Open+Sans:400,300'>    
	<link rel="stylesheet" type="text/css" href="/stylesheets/login.css" />
	
    <% include ../partials/header.ejs %>
    <%- include("../partials/nav.ejs", {loggedin: false}) %> 

</head>

<body>

	<div id="login">

		<h1><strong>Welcome.</strong> Please login.</h1>

		<form action="javascript:void(0);" method="get">

			<fieldset>

				<label for="email">Email Address</label>
				<p><input type="text" id="email" placeholder="Enter email address" name="email"></p> 

				<label for="password">Password</label>
				<p><input type="password" id="password" placeholder="Enter password" name="password"></p> 

                <p><a href="#">Forgot Password?</a></p>
                <p><a href="/register">Don't have an account? Create one!</a></p>

				<div class="clearfix">
					<button type="submit" class="loginbtn" id="loginbtn">Login</button>
				</div>

			</fieldset>

		</form>

		<p><span class="btn-round">or</span></p>

		<p>

			<a class="facebook-before"><span class="fontawesome-facebook"></span></a>
			<button class="facebook">Login Using Facbook</button>

		</p>

		<p>

			<a class="twitter-before"><span class="fontawesome-twitter"></span></a>
			<button class="twitter">Login Using Twitter</button>

		</p>

	</div> <!-- end login -->

	<script type="text/javascript">
	$(document).ready(function () {
		$('#loginbtn').click(function (event) {
			
			event.preventDefault();          
				
			$.ajax({
				method: 'POST',
				url: 'login',
				dataType: 'json',
				processData: false,
				contentType: 'application/json',
				data: JSON.stringify({
					'email':  $('#email').val(),
					'password': $('#password').val()
				}),
				success: (result) => {
					location.href = "/"
					window.sessionStorage.setItem('token', req.token);
				},
				error: (result) => {
					console.log(result.message)
				}
			})
		});
	});
	</script>      
	  

</body>
</html>